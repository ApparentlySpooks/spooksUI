-- Spooks UI Library
local SpooksUI = {}

-- Services
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Create GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "SpooksUI"
ScreenGui.Parent = playerGui

-- Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 500, 0, 300) -- Adjusted size for tabs and toggles
MainFrame.Position = UDim2.new(0.5, -250, 0.5, -150)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.BorderSizePixel = 0
MainFrame.Parent = ScreenGui
MainFrame.Active = true
MainFrame.Draggable = true

-- Title Label
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 40)
Title.Position = UDim2.new(0, 0, 0, 0)
Title.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
Title.BorderSizePixel = 0
Title.Text = "Spooks UI"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Parent = MainFrame

-- Tabs Frame
local TabsFrame = Instance.new("Frame")
TabsFrame.Size = UDim2.new(0, 100, 1, -40) -- Occupy left side
TabsFrame.Position = UDim2.new(0, 0, 0, 40)
TabsFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
TabsFrame.BorderSizePixel = 0
TabsFrame.Parent = MainFrame

-- Content Frame (Buttons, Toggles, etc.)
local ContentFrame = Instance.new("Frame")
ContentFrame.Size = UDim2.new(1, -120, 1, -50) -- Leaves space for tabs and title
ContentFrame.Position = UDim2.new(0, 110, 0, 50)
ContentFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
ContentFrame.BorderSizePixel = 0
ContentFrame.Parent = MainFrame

-- Layout for Buttons and Toggles
local UIListLayout = Instance.new("UIListLayout")
UIListLayout.Padding = UDim.new(0, 10)
UIListLayout.FillDirection = Enum.FillDirection.Vertical
UIListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout.Parent = ContentFrame

-- Button creation function
function SpooksUI.CreateButton(name, callback)
    if not ContentFrame then
        warn("ContentFrame is not initialized!")
        return
    end

    -- Create button
    local Button = Instance.new("TextButton")
    Button.Name = name
    Button.Text = name
    Button.Font = Enum.Font.Gotham
    Button.TextSize = 16
    Button.TextColor3 = Color3.fromRGB(255, 255, 255)
    Button.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    Button.Size = UDim2.new(1, -20, 0, 40) -- Adjusted size to fit inside ContentFrame
    Button.BorderSizePixel = 0
    Button.Parent = ContentFrame

    -- Connect callback
    Button.MouseButton1Click:Connect(function()
        print(name .. " button clicked!")
        if callback then
            callback()
        end
    end)

    return Button
end

-- Toggle creation function
function SpooksUI.CreateToggle(name, callback)
    if not ContentFrame then
        warn("ContentFrame is not initialized!")
        return
    end

    -- Create toggle container
    local ToggleFrame = Instance.new("Frame")
    ToggleFrame.Name = name
    ToggleFrame.Size = UDim2.new(1, -20, 0, 40)
    ToggleFrame.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    ToggleFrame.BorderSizePixel = 0
    ToggleFrame.Parent = ContentFrame

    -- Toggle button
    local ToggleButton = Instance.new("TextButton")
    ToggleButton.Size = UDim2.new(0.8, 0, 1, 0)
    ToggleButton.Position = UDim2.new(0, 10, 0, 0)
    ToggleButton.Text = name
    ToggleButton.Font = Enum.Font.Gotham
    ToggleButton.TextSize = 16
    ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    ToggleButton.BackgroundTransparency = 1
    ToggleButton.Parent = ToggleFrame

    -- Status indicator (Red/Green Circle)
    local StatusCircle = Instance.new("Frame")
    StatusCircle.Size = UDim2.new(0, 20, 0, 20)
    StatusCircle.Position = UDim2.new(0.85, 0, 0.5, -10)
    StatusCircle.BackgroundColor3 = Color3.fromRGB(255, 0, 0) -- Red (default: off)
    StatusCircle.BorderSizePixel = 0
    StatusCircle.AnchorPoint = Vector2.new(0.5, 0.5)
    StatusCircle.Parent = ToggleFrame

    -- Make the circle round
    local UICorner = Instance.new("UICorner")
    UICorner.CornerRadius = UDim.new(1, 0)
    UICorner.Parent = StatusCircle

    -- Toggle state
    local isActive = false

    -- Toggle behavior
    ToggleButton.MouseButton1Click:Connect(function()
        isActive = not isActive
        if isActive then
            StatusCircle.BackgroundColor3 = Color3.fromRGB(0, 255, 0) -- Green (on)
        else
            StatusCircle.BackgroundColor3 = Color3.fromRGB(255, 0, 0) -- Red (off)
        end

        print(name .. " toggled to " .. tostring(isActive))
        if callback then
            callback(isActive)
        end
    end)

    return ToggleFrame
end

-- Return the library
return SpooksUI
